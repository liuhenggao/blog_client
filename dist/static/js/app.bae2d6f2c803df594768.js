webpackJsonp([10],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),_=n("Dd8w"),E=n.n(_),S=n("NYxO"),o=n("Pfph");window.auth=o.a;var a={data:function(){return{}},computed:E()({},Object(S.c)(["user","isLogin"])),created:function(){this.checkLogin().then(function(t){})},methods:E()({},Object(S.b)(["checkLogin","logout"]),{onLogout:function(){this.logout()}})},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{class:{login:t.isLogin,no_login:!t.isLogin}},[t.isLogin?t._e():[n("h1",[n("router-link",{attrs:{to:"/"}},[t._v("Let's share")])],1),t._v(" "),n("p",[t._v("共享精彩世界")]),t._v(" "),n("div",{staticClass:"log_button"},[n("router-link",{attrs:{to:"login"}},[n("el-button",[t._v("立即登录")])],1),t._v(" "),n("router-link",{attrs:{to:"register"}},[n("el-button",[t._v("注册账号")])],1)],1)],t._v(" "),t.isLogin?[n("div",[n("h1",[n("router-link",{attrs:{to:"/"}},[t._v("Let's share")])],1)]),t._v(" "),n("div",{staticClass:"icon_img"},[n("router-link",{attrs:{to:"/create"}},[n("i",{staticClass:"el-icon-edit"})]),t._v(" "),n("div",{staticClass:"user"},[n("img",{attrs:{src:t.user.avatar,alt:t.user.username}}),t._v(" "),n("ul",[n("li",[n("router-link",{attrs:{to:"/my"}},[t._v("我的")])],1),t._v(" "),n("li",{on:{click:t.onLogout}},[n("router-link",{attrs:{to:"/"}},[t._v("注销")])],1)])])],1)]:t._e()],2)},staticRenderFns:[]};var i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"footer"},[e("small",[this._v("©liuhenggao.com 2019 name: blog-client")])])}]};var O={name:"App",components:{Header:n("VU/8")(a,s,!1,function(t){n("Y/hb")},"data-v-7d2a394c",null).exports,Footer:n("VU/8")(null,i,!1,function(t){n("qagw")},"data-v-0b2078d3",null).exports}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Header",{attrs:{id:"header"}}),this._v(" "),e("main",{attrs:{id:"main"}},[e("router-view")],1),this._v(" "),e("Footer",{attrs:{id:"footer"}})],1)},staticRenderFns:[]};var N=n("VU/8")(O,u,!1,function(t){n("VClS")},null,null).exports,c=n("/ocq"),I=n("Xxa5"),L=n.n(I),l=n("exGp"),P=n.n(l),T={state:{user:null,isLogin:!1},getters:{user:function(t){return t.user},isLogin:function(t){return t.isLogin}},mutations:{setUser:function(t,e){t.user=e.user},setLogin:function(t,e){t.isLogin=e.isLogin}},actions:{login:function(t,e){var n=t.commit,r=e.username,_=e.password;return o.a.login({username:r,password:_}).then(function(t){n("setUser",{user:t.data}),n("setLogin",{isLogin:!0})})},register:function(t,e){var n=t.commit,r=e.username,_=e.password;return o.a.register({username:r,password:_}).then(function(t){n("setUser",{user:t.data}),n("setLogin",{isLogin:!0})})},checkLogin:function(t){var e=this,n=t.commit,r=t.state;return P()(L.a.mark(function t(){var _;return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.isLogin){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,o.a.getInfo();case 4:if(_=t.sent,n("setLogin",{isLogin:_.isLogin}),_.isLogin){t.next=8;break}return t.abrupt("return",!1);case 8:return n("setUser",{user:_.data}),t.abrupt("return",!0);case 10:case"end":return t.stop()}},t,e)}))()},logout:function(t){var e=this,n=t.commit;return P()(L.a.mark(function t(){return L.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.logout();case 2:n("setLogin",{isLogin:!1}),n("setUser",{user:null});case 4:case"end":return t.stop()}},t,e)}))()}}},R={state:{},getters:{},mutations:{},actions:{}};r.default.use(S.a);var C=new S.a.Store({modules:{auth:T,blog:R}});r.default.use(c.a);var G=new c.a({routes:[{path:"/",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"epW7"))}},{path:"/login",component:function(){return n.e(4).then(n.bind(null,"OpX7"))}},{path:"/register",component:function(){return n.e(8).then(n.bind(null,"YDhy"))}},{path:"/detail/:blogId",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"YE8u"))}},{path:"/edit/:blogId",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"R6sS"))},meta:{requiresAuth:!0}},{path:"/create",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"/oBs"))},meta:{requiresAuth:!0}},{path:"/my",component:function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,"vv7P"))},meta:{requiresAuth:!0}},{path:"/user/:userId",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"bywM"))}}]});G.beforeEach(function(t,e,n){t.matched.some(function(t){return t.meta.requiresAuth})?C.dispatch("checkLogin").then(function(e){e?n():n({path:"/login",query:{redirect:t.fullPath}})}):n()});var d=G,D=n("zL8q"),f=n.n(D),A=(n("tvR6"),n("pFYg")),h=n.n(A);function g(t){var e=("object"===(void 0===t?"undefined":h()(t))?t:new Date(t)).getTime(),n=new Date-e,r="";switch(!0){case n<6e4:r="刚刚";break;case n<36e5:r=Math.floor(n/6e4)+" 分前";break;case n<864e5:r=Math.floor(n/36e5)+" 小时前";break;default:r=Math.floor(n/864e5)+" 天前"}return r}var p={install:function(t,e){t.prototype.timeFilter=g}};r.default.use(f.a),r.default.use(p),r.default.config.productionTip=!1,new r.default({el:"#app",router:d,store:C,components:{App:N},template:"<App/>"})},Pfph:function(t,e,n){"use strict";var r=n("p+dL"),_="/auth/register",E="/auth/login",S="/auth/logout",o="/auth";e.a={register:function(t){var e=t.username,n=t.password;return Object(r.a)(_,"POST",{username:e,password:n})},login:function(t){var e=t.username,n=t.password;return Object(r.a)(E,"POST",{username:e,password:n})},logout:function(){return Object(r.a)(S)},getInfo:function(){return Object(r.a)(o)}}},RYcG:function(t,e){t.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},VClS:function(t,e){},"Y/hb":function(t,e){},"p+dL":function(t,e,n){"use strict";e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new _.a(function(r,_){var E={url:t,method:e};"get"===e.toLowerCase()?E.params=n:E.data=n,S()(E).then(function(t){"ok"===t.data.status?r(t.data):(o.Message.error(t.data.msg),_(t.data))}).catch(function(t){console.log(t),o.Message.error("网络异常"),_({msg:"网络异常"})})})};var r=n("//Fk"),_=n.n(r),E=n("mtWM"),S=n.n(E),o=n("zL8q"),a=(n.n(o),n("RYcG"));n.n(a);S.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",S.a.defaults.baseURL="https://blog-server.hunger-valley.com",S.a.defaults.withCredentials=!0},qagw:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.bae2d6f2c803df594768.js.map